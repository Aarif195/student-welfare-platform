"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const maintenanceControllers_1 = require("../controllers/maintenanceControllers/maintenanceControllers");
const authMiddleware_1 = require("../middlewares/authMiddleware");
const validation_1 = require("../middlewares/validation");
const validateResult_1 = require("../middlewares/validateResult");
const roleMiddleware_1 = require("../middlewares/roleMiddleware");
const multer_1 = require("../utils/multer");
const router = (0, express_1.Router)();
router.post("/create", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["student"]), multer_1.upload.single("image"), validation_1.validateMaintenance, validateResult_1.validateResult, maintenanceControllers_1.createMaintenanceRequest);
router.get("/all", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["owner", "superadmin"]), maintenanceControllers_1.getMaintenanceRequests);
router.get("/my-requests", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["student"]), maintenanceControllers_1.getStudentMaintenanceRequests);
router.get("/notifications/my-requests", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["student"]), maintenanceControllers_1.getStudentNotifications);
router.patch("/update/:id", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["owner", "superadmin"]), validation_1.updateValidateMaintenance, validateResult_1.validateResult, maintenanceControllers_1.updateMaintenanceStatus);
router.patch("/notifications/:id/read", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["student"]), maintenanceControllers_1.markNotificationAsRead);
router.patch("/notifications/read-all", authMiddleware_1.authenticate, (0, roleMiddleware_1.authorize)(["student"]), maintenanceControllers_1.markAllNotificationsAsRead);
exports.default = router;
